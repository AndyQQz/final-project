<!-- FINAL (HAD A PASSWORD BUG ISSUE BUT THIS IS FINAL IF I DONT CHANGE ANYTHING AGAIN) -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Andy's Virtual Kitty Playground</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { background:#FFF8F0; font-family:'Comic Sans MS',cursive; color:#2d3436; padding: 60px 0; }
  .hero { background:linear-gradient(135deg,#a8edea,#fed6e3); padding:90px 20px; text-align:center; border-bottom:10px solid #ffeaa7; }
  .big-title { font-size:4.5rem; font-weight:bold; }
  .subtitle { font-size:2rem; }

  .card-btn {
    background:white; border-radius:25px; height:300px; box-shadow:0 12px 25px rgba(0,0,0,0.15);
    display:flex; flex-direction:column; justify-content:center; transition:0.3s;
  }
  .card-btn:hover { transform:translateY(-15px); }
  .card-title { font-size:2.5rem; }
  .card-text { font-size:1.4rem; color:#636e72; }

  .content { display:none; padding:60px 20px; min-height:100vh; background:#FFF8F0; }
  .content.active { display:block; }

  .back-top {
    position:fixed; bottom:30px; right:30px; display:none; background:#fd79a8; color:white;
    width:170px; border-radius:50px; font-size:1.5rem;
  }
  .cat-img { border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.2); }
  .list-group-item { background:#f9e4b7; }
</style>
</head>
<body>

<div class="hero text-center">
  <h1 class="big-title">Andy's Virtual Kitty Playground</h1>
  <p class="subtitle">Explore the fun big three features using cat data from CATAAS !!!</p>

  <div class="container mt-5">
    <div class="row g-5 justify-content-center">
      <div class="col-md-4">
        <div class="card-btn" onclick="show('loaders')">
          <div class="card-title text-primary">Cat Loaders</div>
          <div class="card-text">Three ways to see cats</div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card-btn" onclick="show('order')">
          <div class="card-title text-success">Order Digital Cat</div>
          <div class="card-text">Fake shopping fun</div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card-btn" onclick="show('account')">
          <div class="card-title text-warning">Cat Account</div>
          <div class="card-text">Sign up & log in</div>
        </div>
      </div>
    </div>
    <button onclick="show('home')" class="btn btn-dark btn-lg mt-4">‚Üê Back Home</button>
  </div>
</div>

<!-- ONE SINGLE CONTENT AREA -->
<div id="content" class="content active">
  <!-- content gets swapped in here by JavaScript -->
</div>

<a href="#" class="btn back-top" onclick="window.scrollTo(0,0)">‚Üë Back to Top</a>

<script>
// Simple show/hide function
function show(section) {
  const home = `
    <div class="text-center py-5">
      <h2 class="display-4">Welcome! Pick a button above üò∫</h2>
    </div>`;

  const loaders = `
    <div class="container text-center">
      <h2 class="display-4 text-primary mb-5">Cat Loaders</h2>
      <button onclick="loadRandom()" class="btn btn-outline-primary btn-lg m-3 px-5">Random Cats</button>
      <button onclick="loadCute()" class="btn btn-outline-success btn-lg m-3 px-5">Cute Cats</button>
      <button onclick="loadMessages()" class="btn btn-outline-warning btn-lg m-3 px-5">Talking Cats</button>
      <div class="row justify-content-center mt-4" id="cat-display"></div>
    </div>`;

  const order = `
    <div class="container">
      <h2 class="text-success text-center mb-4">Order a Digital Cat</h2>
      <div class="alert alert-warning text-center">Use fake info only!</div>
      ${localStorage.loggedIn === 'true' ? '' : '<p class="text-center text-danger fs-4">Please log in first!</p>'}
      <form onsubmit="placeOrder(event)" class="col-lg-6 mx-auto">
        <select id="cat-choice" class="form-select form-select-lg mb-3">
          <option>Random</option><option>Cute</option><option>With Message</option>
        </select>
        <input type="text" id="fake-credit" placeholder="Fake card" class="form-control form-control-lg mb-3" required>
        <input type="text" id="fake-address" placeholder="Fake address" class="form-control form-control-lg mb-4" required>
        <button type="submit" class="btn btn-success btn-lg w-100">Place Order</button>
      </form>
      <h4 class="mt-5">All Orders</h4>
      <div id="orders-list" class="list-group"></div>
    </div>`;

  const account = `
    <div class="container">
      <h2 class="text-warning text-center mb-5">Cat Account</h2>
      <div class="row">
        <div class="col-md-6">
          <h4>Sign Up</h4>
          <form onsubmit="signUp(event)">
            <input type="text" id="email" placeholder="email@cat.com" class="form-control form-control-lg mb-3" required>
            <input type="password" id="password" placeholder="password" class="form-control form-control-lg mb-3" required>
            <button type="submit" class="btn btn-primary btn-lg w-100">Sign Up</button>
          </form>
        </div>
        <div class="col-md-6">
          <h4>Log In</h4>
          <form onsubmit="login(event)">
            <input type="text" id="login-email" class="form-control form-control-lg mb-3" required>
            <input type="password" id="login-password" class="form-control form-control-lg mb-3" required>
            <button type="submit" class="btn btn-success btn-lg w-100">Log In</button>
          </form>
        </div>
      </div>
      <h4 class="mt-5">All Accounts</h4>
      <div id="accounts-list" class="list-group"></div>
    </div>`;

  document.getElementById('content').innerHTML = 
    section === 'home' ? home : 
    section === 'loaders' ? loaders : 
    section === 'order' ? order : account;

  document.getElementById('content').classList.add('active');
  window.scrollTo(0,0);
}

// Cat loaders
function loadRandom() { loadCats(''); }
function loadCute()   { loadCats('cute'); }
function loadMessages() {
  const msgs = ['Meow!','Purrfect','Hello Human','Love You'];
  let html = '';
  msgs.forEach(t => html += `<div class="col-md-6"><img src="https://cataas.com/cat/says/${t}?size=60&color=white" class="cat-img img-fluid"></div>`);
  document.getElementById('cat-display').innerHTML = html;
}
function loadCats(tag) {
  let url = tag ? `https://cataas.com/api/cats?tags=${tag}&limit=6` : 'https://cataas.com/api/cats?limit=6';
  fetch(url).then(r=>r.json()).then(data=>{
    let html = '';
    data.forEach(c=> html += `<div class="col-md-6 mb-4"><img src="https://cataas.com/cat/${c.id}" class="cat-img img-fluid"></div>`);
    document.getElementById('cat-display').innerHTML = html;
  });
}

// Orders & Accounts (fixed login bug!)
function placeOrder(e) {
  e.preventDefault();
  if (!localStorage.loggedIn) { alert('Log in first!'); show('account'); return; }
  let orders = JSON.parse(localStorage.getItem('orders')||'[]');
  orders.push({
    type: document.getElementById('cat-choice').value,
    card: document.getElementById('fake-credit').value.slice(-4),
    addr: document.getElementById('fake-address').value
  });
  localStorage.setItem('orders', JSON.stringify(orders));
  alert('Order placed!');
  showOrders();
}

function signUp(e) {
  e.preventDefault();
  let email = document.getElementById('email').value.trim();
  let pwd = document.getElementById('password').value;
  if (!email.includes('@') || !email.endsWith('.com')) return alert('Email needs @ and .com');
  let accs = JSON.parse(localStorage.getItem('accounts')||'[]');
  if (accs.find(a=>a.email===email)) return alert('Email taken');
  accs.push({email,pwd});
  localStorage.setItem('accounts', JSON.stringify(accs));
  alert('Signed up!');
  showAccounts();
}

function login(e) {
  e.preventDefault();
  let email = document.getElementById('login-email').value;
  let pwd = document.getElementById('login-password').value;
  let accs = JSON.parse(localStorage.getItem('accounts')||'[]');
  let user = accs.find(a=>a.email===email && a.pwd===pwd);
  if (user) {
    localStorage.loggedIn = 'true';   // ‚Üê this was the bug! now it saves correctly
    alert('Logged in!');
    showOrders();
  } else alert('Wrong email/password');
}

function showOrders() {
  if (!localStorage.loggedIn) return;
  let list = document.getElementById('orders-list');
  let orders = JSON.parse(localStorage.getItem('orders')||'[]');
  list.innerHTML = orders.map((o,i)=>`<div class="list-group-item">Order ${i+1}: ${o.type} cat ‚Äî ends ${o.card}</div>`).join('');
}

function showAccounts() {
  let list = document.getElementById('accounts-list');
  let accs = JSON.parse(localStorage.getItem('accounts')||'[]');
  list.innerHTML = accs.map(a=>`<div class="list-group-item">${a.email}</div>`).join('');
}

// Show back-to-top only when needed
window.onscroll = () => {
  document.querySelector('.back-top').style.display = window.scrollY > 300 ? 'block' : 'none';
};

// Start
show('home');
showAccounts();
showOrders();
</script>
</body>
</html>
